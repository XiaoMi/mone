import{d as R,r as D,o as pe,E as N,z as me,_ as W,c as w,A as Ne,e as E,f as o,g as r,B as Ie,w as d,i as H,F as $,h as I,k as O,t as B,y as Z,q as ke,C as Pe,D as Be,x as ge,v as ie,b as Oe,u as xe,l as je,G as Ee,H as Le,I as Ue,T as Te,j as q,s as ze}from"./index-Co6ij2vp.js";import{g as He,d as Me,u as Je,c as qe,a as Re,b as Ke,e as Qe,f as We,h as Ge,i as Ye,j as Ze,k as Xe,l as $e,m as et,n as tt}from"./agent-D_xH4Fa1.js";import{g as nt}from"./user-CN9QmXqL.js";import{v as lt}from"./v4-CtRu48qb.js";import"./index-BYulWOv-.js";const at=R({__name:"SkillList",props:{agentId:{type:Number,required:!0}},setup(t,{expose:e}){e();const a=t,n=D(!1),h=D([]),y=D(!1),c=D(null),u=D({name:"",skillId:"",description:"",tags:"",examples:"",outputSchema:""}),_=D([]),f=async()=>{n.value=!0;try{const{data:i}=await He(a.agentId);h.value=i.data||[]}catch(i){console.error("获取技能列表失败:",i),N.error("获取技能列表失败")}finally{n.value=!1}},g=()=>{c.value=null,u.value={name:"",skillId:"",description:"",tags:"",examples:"",outputSchema:""},y.value=!0},b=i=>{c.value=i,u.value={name:i.name,skillId:i.id.toString(),description:i.description,tags:i.tags||"",examples:i.examples||"",outputSchema:i.outputSchema||""},y.value=!0},v=async i=>{try{await me.confirm("确定要删除该技能吗？","提示",{type:"warning"}),await Me(i.id),N.success("删除成功"),f()}catch(S){console.error("删除技能失败:",S),N.error("删除技能失败")}},k=async()=>{try{c.value?(await Je(c.value.id,u.value),N.success("更新成功")):(await qe(a.agentId,u.value),N.success("创建成功")),y.value=!1,f()}catch(i){console.error("操作失败:",i),N.error("操作失败")}},A=i=>new Date(i).toLocaleString();pe(()=>{f()});const s={props:a,loading:n,skills:h,dialogVisible:y,editingSkill:c,skillForm:u,expandedRows:_,fetchSkills:f,handleCreateSkill:g,handleEdit:b,handleDelete:v,handleSubmit:k,formatDate:A};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),ot={class:"skill-list"},rt={class:"skill-header"},st={class:"skill-detail"};function it(t,e,a,n,h,y){const c=w("el-button"),u=w("el-table-column"),_=w("el-button-group"),f=w("el-table"),g=w("el-input"),b=w("el-form-item"),v=w("el-form"),k=w("el-dialog"),A=Ne("loading");return I(),E($,null,[o("div",ot,[o("div",rt,[e[8]||(e[8]=o("h3",{class:"skills-title"},"技能列表",-1)),r(c,{type:"primary",class:"create-skill-btn",onClick:n.handleCreateSkill,size:"small"},{default:d(()=>e[7]||(e[7]=[O(" 创建技能 ")])),_:1})]),Ie((I(),H(f,{data:n.skills,style:{width:"100%"},"row-key":"id","expand-row-keys":n.expandedRows},{default:d(()=>[r(u,{type:"expand"},{default:d(({row:s})=>[o("div",st,[o("dl",null,[e[9]||(e[9]=o("dt",null,"标签:",-1)),o("dd",null,B(s.tags||"无"),1)]),o("dl",null,[e[10]||(e[10]=o("dt",null,"示例:",-1)),o("dd",null,B(s.examples||"无"),1)]),o("dl",null,[e[11]||(e[11]=o("dt",null,"输出格式:",-1)),o("dd",null,B(s.outputSchema||"无"),1)])])]),_:1}),r(u,{prop:"name",label:"名称"}),r(u,{prop:"description",label:"描述","show-overflow-tooltip":""}),r(u,{prop:"createdAt",label:"创建时间"},{default:d(({row:s})=>[O(B(n.formatDate(s.ctime)),1)]),_:1}),r(u,{label:"操作",width:"150"},{default:d(({row:s})=>[r(_,null,{default:d(()=>[r(c,{size:"small",type:"primary",text:"",onClick:i=>n.handleEdit(s)},{default:d(()=>e[12]||(e[12]=[O(" 编辑 ")])),_:2},1032,["onClick"]),r(c,{size:"small",type:"danger",text:"",onClick:i=>n.handleDelete(s)},{default:d(()=>e[13]||(e[13]=[O(" 删除 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","expand-row-keys"])),[[A,n.loading]])]),r(k,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[6]||(e[6]=s=>n.dialogVisible=s),title:n.editingSkill?"编辑技能":"创建技能",width:"50%","append-to-body":"",class:"skill-dialog"},{footer:d(()=>[r(c,{onClick:e[5]||(e[5]=s=>n.dialogVisible=!1)},{default:d(()=>e[14]||(e[14]=[O("取消")])),_:1}),r(c,{type:"primary",onClick:n.handleSubmit},{default:d(()=>e[15]||(e[15]=[O("确定")])),_:1})]),default:d(()=>[r(v,{ref:"formRef",model:n.skillForm,"label-width":"80px"},{default:d(()=>[r(b,{label:"名称",prop:"name"},{default:d(()=>[r(g,{modelValue:n.skillForm.name,"onUpdate:modelValue":e[0]||(e[0]=s=>n.skillForm.name=s),placeholder:"请输入技能名称"},null,8,["modelValue"])]),_:1}),r(b,{label:"描述",prop:"description"},{default:d(()=>[r(g,{modelValue:n.skillForm.description,"onUpdate:modelValue":e[1]||(e[1]=s=>n.skillForm.description=s),type:"textarea",placeholder:"请输入技能描述"},null,8,["modelValue"])]),_:1}),r(b,{label:"标签",prop:"tags"},{default:d(()=>[r(g,{modelValue:n.skillForm.tags,"onUpdate:modelValue":e[2]||(e[2]=s=>n.skillForm.tags=s),placeholder:"请输入标签"},null,8,["modelValue"])]),_:1}),r(b,{label:"示例",prop:"examples"},{default:d(()=>[r(g,{modelValue:n.skillForm.examples,"onUpdate:modelValue":e[3]||(e[3]=s=>n.skillForm.examples=s),type:"textarea",placeholder:"请输入使用示例"},null,8,["modelValue"])]),_:1}),r(b,{label:"输出格式",prop:"outputSchema"},{default:d(()=>[r(g,{modelValue:n.skillForm.outputSchema,"onUpdate:modelValue":e[4]||(e[4]=s=>n.skillForm.outputSchema=s),type:"textarea",placeholder:"请输入输出格式（JSON Schema）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}const ut=W(at,[["render",it],["__scopeId","data-v-985aa539"],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/SkillList.vue"]]),dt=R({__name:"AccessList",props:{agentId:{type:Number,required:!0}},setup(t,{expose:e}){e();const a=t,n=D([]),h=D(!1),y=D(),c=D({agentId:0,accessApp:"",description:"",accessAppId:""}),u={accessAppId:[{required:!0,message:"请选择调用方",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}]},_=D([]);Z(()=>h.value,i=>{i||(c.value={agentId:0,accessApp:"",description:"",accessAppId:""},y.value.resetFields())});const f=async()=>{try{const i=await Re(a.agentId,{agentId:a.agentId,accessApp:"",description:""});i.data.code===200?n.value=i.data.data||[]:N.error("获取 Access 列表失败")}catch{N.error("获取 Access 列表失败")}},g=async()=>{try{const i=await nt();i.data.code===200?_.value=i.data.data||[]:N.error("获取用户列表失败")}catch{N.error("获取用户列表失败")}};pe(()=>{g()});const b=()=>{c.value={agentId:a.agentId,accessApp:"",description:"",accessAppId:""},h.value=!0},v=async()=>{y.value.validate(async i=>{var S;i&&(c.value.accessApp=(S=_.value.find(l=>l.id==c.value.accessAppId))==null?void 0:S.username,(await Ke(c.value)).data.code===200?(N.success("创建成功"),h.value=!1,f()):N.error("创建失败"))})},k=async i=>{try{await me.confirm("确认删除该 Access？","提示",{type:"warning"}),(await Qe(i)).data.code===200?(N.success("删除成功"),f()):N.error("删除失败")}catch(S){S!=="cancel"&&N.error("删除失败")}};Z(()=>a.agentId,i=>{i&&(c.value.agentId=i,f())},{immediate:!0});const s={props:a,accessData:n,dialogVisible:h,formRef:y,form:c,rules:u,userList:_,fetchAccessList:f,fetchUserList:g,showCreateDialog:b,handleCreate:v,handleDelete:k,formatDate:i=>new Date(i).toLocaleString()};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),ct={class:"access-list"},pt={class:"access-header"};function mt(t,e,a,n,h,y){const c=w("el-button"),u=w("el-table-column"),_=w("el-table"),f=w("el-option"),g=w("el-select"),b=w("el-form-item"),v=w("el-input"),k=w("el-form"),A=w("el-dialog");return I(),E("div",ct,[o("div",pt,[e[5]||(e[5]=o("h3",{class:"access-title"},"Access 列表",-1)),r(c,{type:"primary",onClick:n.showCreateDialog,class:"create-access-btn",size:"small"},{default:d(()=>e[4]||(e[4]=[O("创建 Access")])),_:1})]),r(_,{data:n.accessData,style:{width:"100%","margin-top":"20px"}},{default:d(()=>[r(u,{prop:"id",label:"ID",width:"50"}),r(u,{prop:"accessApp",label:"调用方"}),r(u,{prop:"description",label:"描述"}),r(u,{prop:"accessKey",label:"Access Key"}),r(u,{prop:"ctime",label:"创建时间"},{default:d(({row:s})=>[O(B(n.formatDate(s.ctime)),1)]),_:1}),r(u,{prop:"utime",label:"更新时间"},{default:d(({row:s})=>[O(B(n.formatDate(s.utime)),1)]),_:1}),r(u,{label:"操作",width:"80"},{default:d(({row:s})=>[r(c,{type:"danger",size:"small",text:"",onClick:i=>n.handleDelete(s.id)},{default:d(()=>e[6]||(e[6]=[O(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),r(A,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=s=>n.dialogVisible=s),title:"创建 Access",width:"50%","append-to-body":"",class:"access-dialog"},{footer:d(()=>[r(c,{onClick:e[2]||(e[2]=s=>n.dialogVisible=!1)},{default:d(()=>e[7]||(e[7]=[O("取消")])),_:1}),r(c,{type:"primary",onClick:n.handleCreate},{default:d(()=>e[8]||(e[8]=[O("确认")])),_:1})]),default:d(()=>[r(k,{ref:"formRef",model:n.form,rules:n.rules,"label-width":"100px"},{default:d(()=>[r(b,{label:"调用方",prop:"accessAppId"},{default:d(()=>[r(g,{modelValue:n.form.accessAppId,"onUpdate:modelValue":e[0]||(e[0]=s=>n.form.accessAppId=s),placeholder:"请选择调用方",style:{width:"100%"}},{default:d(()=>[(I(!0),E($,null,ke(n.userList,s=>(I(),H(f,{key:s.id,label:s.username,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(b,{label:"描述",prop:"description"},{default:d(()=>[r(v,{modelValue:n.form.description,"onUpdate:modelValue":e[1]||(e[1]=s=>n.form.description=s),type:"textarea",placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const gt=W(dt,[["render",mt],["__scopeId","data-v-8a384f87"],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/AccessList.vue"]]);var ae={d:(t,e)=>{for(var a in e)ae.o(e,a)&&!ae.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},Fe={};function ue(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function Ce(t,e){if(t){if(typeof t=="string")return ue(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ue(t,e):void 0}}function oe(t){return function(e){if(Array.isArray(e))return ue(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||Ce(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function re(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}ae.d(Fe,{Z:()=>_t});const m=(ve={computed:()=>ge,createTextVNode:()=>O,createVNode:()=>r,defineComponent:()=>R,reactive:()=>Be,ref:()=>D,watch:()=>Z,watchEffect:()=>Pe},se={},ae.d(se,ve),se),ft=(0,m.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var t=this.data,e=this.onClick;return(0,m.createVNode)("span",{class:"vjs-tree-brackets",onClick:e},[t])}}),vt=(0,m.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(t,e){var a=e.emit;return{uiType:(0,m.computed)(function(){return t.isMultiple?"checkbox":"radio"}),model:(0,m.computed)({get:function(){return t.checked},set:function(n){return a("update:modelValue",n)}})}},render:function(){var t=this.uiType,e=this.model,a=this.$emit;return(0,m.createVNode)("label",{class:["vjs-check-controller",e?"is-checked":""],onClick:function(n){return n.stopPropagation()}},[(0,m.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(t)},null),(0,m.createVNode)("input",{checked:e,class:"vjs-check-controller-original is-".concat(t),type:t,onChange:function(){return a("change",e)}},null)])}}),ht=(0,m.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var t=this.nodeType,e=this.onClick,a=t==="objectStart"||t==="arrayStart";return a||t==="objectCollapsed"||t==="arrayCollapsed"?(0,m.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(a?"open":"close"),onClick:e},[(0,m.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,m.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var ve,se;function de(t){return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function we(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function Q(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,h=n||{},y=h.key,c=h.index,u=h.type,_=u===void 0?"content":u,f=h.showComma,g=f!==void 0&&f,b=h.length,v=b===void 0?1:b,k=we(t);if(k==="array"){var A=he(t.map(function(S,F,l){return Q(S,"".concat(e,"[").concat(F,"]"),a+1,{index:F,showComma:F!==l.length-1,length:v,type:_})}));return[Q("[",e,a,{showComma:!1,key:y,length:t.length,type:"arrayStart"})[0]].concat(A,Q("]",e,a,{showComma:g,length:t.length,type:"arrayEnd"})[0])}if(k==="object"){var s=Object.keys(t),i=he(s.map(function(S,F,l){return Q(t[S],/^[a-zA-Z_]\w*$/.test(S)?"".concat(e,".").concat(S):"".concat(e,'["').concat(S,'"]'),a+1,{key:S,showComma:F!==l.length-1,length:v,type:_})}));return[Q("{",e,a,{showComma:!1,key:y,index:c,length:s.length,type:"objectStart"})[0]].concat(i,Q("}",e,a,{showComma:g,length:s.length,type:"objectEnd"})[0])}return[{content:t,level:a,key:y,index:c,path:e,showComma:g,length:v,type:_}]}function he(t){if(typeof Array.prototype.flat=="function")return t.flat();for(var e=oe(t),a=[];e.length;){var n=e.shift();Array.isArray(n)?e.unshift.apply(e,oe(n)):a.push(n)}return a}function ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(t==null)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if(de(t)!=="object")return t;if(e.get(t))return e.get(t);if(Array.isArray(t)){var a=t.map(function(y){return ce(y,e)});return e.set(t,a),a}var n={};for(var h in t)n[h]=ce(t[h],e);return e.set(t,n),n}function ye(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),a.push.apply(a,n)}return a}function _e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ye(Object(a),!0).forEach(function(n){re(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}var Ve={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const yt=(0,m.defineComponent)({name:"TreeNode",props:_e(_e({},Ve),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(t,e){var a=e.emit,n=(0,m.computed)(function(){return we(t.node.content)}),h=(0,m.computed)(function(){return"vjs-value vjs-value-".concat(n.value)}),y=(0,m.computed)(function(){return t.showDoubleQuotes?'"'.concat(t.node.key,'"'):t.node.key}),c=(0,m.computed)(function(){return t.selectableType==="multiple"}),u=(0,m.computed)(function(){return t.selectableType==="single"}),_=(0,m.computed)(function(){return t.nodeSelectable(t.node)&&(c.value||u.value)}),f=(0,m.reactive)({editing:!1}),g=function(F){var l,p,C=(p=(l=F.target)===null||l===void 0?void 0:l.value)==="null"?null:p==="undefined"?void 0:p==="true"||p!=="false"&&(p[0]+p[p.length-1]==='""'||p[0]+p[p.length-1]==="''"?p.slice(1,-1):typeof Number(p)=="number"&&!isNaN(Number(p))||p==="NaN"?Number(p):p);a("valueChange",C,t.node.path)},b=(0,m.computed)(function(){var F,l=(F=t.node)===null||F===void 0?void 0:F.content;return l===null?l="null":l===void 0&&(l="undefined"),n.value==="string"?'"'.concat(l,'"'):l+""}),v=function(){var F=t.renderNodeValue;return F?F({node:t.node,defaultValue:b.value}):b.value},k=function(){a("bracketsClick",!t.collapsed,t.node)},A=function(){a("iconClick",!t.collapsed,t.node)},s=function(){a("selectedChange",t.node)},i=function(){a("nodeClick",t.node),_.value&&t.selectOnClickNode&&a("selectedChange",t.node)},S=function(F){if(t.editable&&!f.editing){f.editing=!0;var l=function p(C){var P;C.target!==F.target&&((P=C.target)===null||P===void 0?void 0:P.parentElement)!==F.target&&(f.editing=!1,document.removeEventListener("click",p))};document.removeEventListener("click",l),document.addEventListener("click",l)}};return function(){var F,l=t.node;return(0,m.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":t.showSelectController,"has-carets":t.showIcon,"is-highlight":t.highlightSelectedNode&&t.checked,dark:t.theme==="dark"},onClick:i,style:t.style},[t.showLineNumber&&(0,m.createVNode)("span",{class:"vjs-node-index"},[l.id+1]),t.showSelectController&&_.value&&l.type!=="objectEnd"&&l.type!=="arrayEnd"&&(0,m.createVNode)(vt,{isMultiple:c.value,checked:t.checked,onChange:s},null),(0,m.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(l.level)).map(function(p,C){return(0,m.createVNode)("div",{key:C,class:{"vjs-indent-unit":!0,"has-line":t.showLine}},null)}),t.showIcon&&(0,m.createVNode)(ht,{nodeType:l.type,onClick:A},null)]),l.key&&(0,m.createVNode)("span",{class:"vjs-key"},[(F=t.renderNodeKey,F?F({node:t.node,defaultKey:y.value||""}):y.value),(0,m.createVNode)("span",{class:"vjs-colon"},[":".concat(t.showKeyValueSpace?" ":"")])]),(0,m.createVNode)("span",null,[l.type!=="content"&&l.content?(0,m.createVNode)(ft,{data:l.content.toString(),onClick:k},null):(0,m.createVNode)("span",{class:h.value,onClick:!t.editable||t.editableTrigger&&t.editableTrigger!=="click"?void 0:S,onDblclick:t.editable&&t.editableTrigger==="dblclick"?S:void 0},[t.editable&&f.editing?(0,m.createVNode)("input",{value:b.value,onChange:g,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):v()]),l.showComma&&(0,m.createVNode)("span",null,[","]),t.showLength&&t.collapsed&&(0,m.createVNode)("span",{class:"vjs-comment"},[(0,m.createTextVNode)(" // "),l.length,(0,m.createTextVNode)(" items ")])])])}}});function be(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),a.push.apply(a,n)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?be(Object(a),!0).forEach(function(n){re(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}const _t=(0,m.defineComponent)({name:"Tree",props:T(T({},Ve),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(t,e){var a=e.emit,n=e.slots,h=(0,m.ref)(),y=(0,m.computed)(function(){return Q(t.data,t.rootPath)}),c=function(l,p){return y.value.reduce(function(C,P){var x,j=P.level>=l||P.length>=p,U=(x=t.pathCollapsible)===null||x===void 0?void 0:x.call(t,P);return P.type!=="objectStart"&&P.type!=="arrayStart"||!j&&!U?C:T(T({},C),{},re({},P.path,1))},{})},u=(0,m.reactive)({translateY:0,visibleData:null,hiddenPaths:c(t.deep,t.collapsedNodeLength)}),_=(0,m.computed)(function(){for(var l=null,p=[],C=y.value.length,P=0;P<C;P++){var x=T(T({},y.value[P]),{},{id:P}),j=u.hiddenPaths[x.path];if(l&&l.path===x.path){var U=l.type==="objectStart",G=T(T(T({},x),l),{},{showComma:x.showComma,content:U?"{...}":"[...]",type:U?"objectCollapsed":"arrayCollapsed"});l=null,p.push(G)}else{if(j&&!l){l=x;continue}if(l)continue;p.push(x)}}return p}),f=(0,m.computed)(function(){var l=t.selectedValue;return l&&t.selectableType==="multiple"&&Array.isArray(l)?l:[l]}),g=(0,m.computed)(function(){return!t.selectableType||t.selectOnClickNode||t.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),b=function(){var l=_.value;if(t.virtual){var p,C=t.height/t.itemHeight,P=((p=h.value)===null||p===void 0?void 0:p.scrollTop)||0,x=Math.floor(P/t.itemHeight),j=x<0?0:x+C>l.length?l.length-C:x;j<0&&(j=0);var U=j+C;u.translateY=j*t.itemHeight,u.visibleData=l.filter(function(G,K){return K>=j&&K<U})}else u.visibleData=l},v=function(){b()},k=function(l){var p,C,P=l.path,x=t.selectableType;if(x==="multiple"){var j=f.value.findIndex(function(z){return z===P}),U=oe(f.value);j!==-1?U.splice(j,1):U.push(P),a("update:selectedValue",U),a("selectedChange",U,oe(f.value))}else if(x==="single"&&f.value[0]!==P){var G=(p=f.value,C=1,function(z){if(Array.isArray(z))return z}(p)||function(z,ee){var J=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(J!=null){var te,ne,X=[],Y=!0,V=!1;try{for(J=J.call(z);!(Y=(te=J.next()).done)&&(X.push(te.value),!ee||X.length!==ee);Y=!0);}catch(L){V=!0,ne=L}finally{try{Y||J.return==null||J.return()}finally{if(V)throw ne}}return X}}(p,C)||Ce(p,C)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],K=P;a("update:selectedValue",K),a("selectedChange",K,G)}},A=function(l){a("nodeClick",l)},s=function(l,p){if(l)u.hiddenPaths=T(T({},u.hiddenPaths),{},re({},p,1));else{var C=T({},u.hiddenPaths);delete C[p],u.hiddenPaths=C}},i=function(l,p){t.collapsedOnClickBrackets&&s(l,p.path),a("bracketsClick",l,p)},S=function(l,p){s(l,p.path),a("iconClick",l,p)},F=function(l,p){var C=ce(t.data),P=t.rootPath;new Function("data","val","data".concat(p.slice(P.length),"=val"))(C,l),a("update:data",C)};return(0,m.watchEffect)(function(){g.value&&function(l){throw new Error("[VueJSONPretty] ".concat(l))}(g.value)}),(0,m.watchEffect)(function(){_.value&&b()}),(0,m.watch)(function(){return t.deep},function(l){l&&(u.hiddenPaths=c(l,t.collapsedNodeLength))}),(0,m.watch)(function(){return t.collapsedNodeLength},function(l){l&&(u.hiddenPaths=c(t.deep,l))}),function(){var l,p,C=(l=t.renderNodeKey)!==null&&l!==void 0?l:n.renderNodeKey,P=(p=t.renderNodeValue)!==null&&p!==void 0?p:n.renderNodeValue,x=u.visibleData&&u.visibleData.map(function(j){return(0,m.createVNode)(yt,{key:j.id,node:j,collapsed:!!u.hiddenPaths[j.path],theme:t.theme,showDoubleQuotes:t.showDoubleQuotes,showLength:t.showLength,checked:f.value.includes(j.path),selectableType:t.selectableType,showLine:t.showLine,showLineNumber:t.showLineNumber,showSelectController:t.showSelectController,selectOnClickNode:t.selectOnClickNode,nodeSelectable:t.nodeSelectable,highlightSelectedNode:t.highlightSelectedNode,editable:t.editable,editableTrigger:t.editableTrigger,showIcon:t.showIcon,showKeyValueSpace:t.showKeyValueSpace,renderNodeKey:C,renderNodeValue:P,onNodeClick:A,onBracketsClick:i,onIconClick:S,onSelectedChange:k,onValueChange:F,style:t.itemHeight&&t.itemHeight!==20?{lineHeight:"".concat(t.itemHeight,"px")}:{}},null)});return(0,m.createVNode)("div",{ref:h,class:{"vjs-tree":!0,"is-virtual":t.virtual,dark:t.theme==="dark"},onScroll:t.virtual?v:void 0,style:t.showLineNumber?T({paddingLeft:"".concat(12*Number(y.value.length.toString().length),"px")},t.style):t.style},[t.virtual?(0,m.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(t.height,"px")}},[(0,m.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(_.value.length*t.itemHeight,"px")}},[(0,m.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(u.translateY,"px)")}},[x])])]):x])}}});var Se=Fe.Z;const bt=R({__name:"AgentDetailDrawer",props:{modelValue:{type:Boolean,required:!0},agent:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{expose:e,emit:a}){e();const n=t,h=a,y=D(n.modelValue),c=D(null),u=async()=>{var v;try{const{data:k}=await We(n.agent.id);c.value=((v=k.data)==null?void 0:v.agent)||null}catch(k){console.error("获取Agent详情失败:",k)}};Z(()=>n.modelValue,v=>{y.value=v,v&&u()},{immediate:!0});const b={props:n,emit:h,visible:y,agentDetail:c,fetchAgentDetail:u,handleClose:()=>{h("update:modelValue",!1)},formatDate:v=>new Date(v).toLocaleString(),handleParse:v=>{try{let k=JSON.parse(v);const A=s=>{if(typeof s=="string")try{const i=JSON.parse(s);return A(i)}catch{return s}else{if(Array.isArray(s))return s.map(i=>A(i));if(typeof s=="object"&&s!==null){const i={};for(const S in s)s.hasOwnProperty(S)&&(i[S]=A(s[S]));return i}}return s};return A(k)}catch(k){return console.error("Failed to parse JSON:",k),null}},SkillList:ut,AccessList:gt,get VueJsonPretty(){return Se}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),kt={key:0,class:"detail-content"},Ft={class:"detail-item-group"},Ct={class:"detail-item"},wt={class:"value"},Vt={class:"detail-item"},St={class:"value description"},Dt={class:"detail-item"},At={class:"value description"},Nt={class:"detail-item"},It={class:"value description"},Pt={class:"detail-item"},Bt={class:"value url"},Ot={class:"detail-item"},xt={class:"value description"},jt={class:"detail-item"},Et={class:"value"},Lt={class:"detail-item"},Ut={class:"value"},Tt={class:"detail-item"},zt={class:"value"},Ht={class:"detail-item"},Mt={class:"value"},Jt={class:"detail-item"},qt={class:"value"},Rt={class:"skills-section"};function Kt(t,e,a,n,h,y){var _;const c=w("el-tag"),u=w("el-drawer");return I(),H(u,{modelValue:n.visible,"onUpdate:modelValue":e[0]||(e[0]=f=>n.visible=f),direction:"rtl",size:"80%",title:(_=n.agentDetail)==null?void 0:_.name,"destroy-on-close":!0,class:"agent-detail-drawer",onClose:n.handleClose},{default:d(()=>[n.agentDetail?(I(),E("div",kt,[o("div",Ft,[o("div",Ct,[e[1]||(e[1]=o("div",{class:"label"},"名称",-1)),o("div",wt,B(n.agentDetail.name||"--"),1)]),o("div",Vt,[e[2]||(e[2]=o("div",{class:"label"},"人设",-1)),o("div",St,B(n.agentDetail.profile||"--"),1)]),o("div",Dt,[e[3]||(e[3]=o("div",{class:"label"},"描述",-1)),o("div",At,B(n.agentDetail.description||"--"),1)]),o("div",Nt,[e[4]||(e[4]=o("div",{class:"label"},"目标",-1)),o("div",It,B(n.agentDetail.goal||"--"),1)]),o("div",Pt,[e[5]||(e[5]=o("div",{class:"label"},"地址",-1)),o("div",Bt,B(n.agentDetail.agentUrl||"--"),1)]),o("div",Ot,[e[6]||(e[6]=o("div",{class:"label"},"约束",-1)),o("div",xt,B(n.agentDetail.constraints||"--"),1)]),o("div",jt,[e[7]||(e[7]=o("div",{class:"label"},"更新时间",-1)),o("div",Et,B(n.formatDate(n.agentDetail.utime)),1)]),o("div",Lt,[e[8]||(e[8]=o("div",{class:"label"},"公开",-1)),o("div",Ut,[r(c,{type:n.agentDetail.isPublic?"success":"info"},{default:d(()=>[O(B(n.agentDetail.isPublic?"是":"否"),1)]),_:1},8,["type"])])]),o("div",Tt,[e[9]||(e[9]=o("div",{class:"label"},"创建时间",-1)),o("div",zt,B(n.formatDate(n.agentDetail.ctime)),1)])]),o("div",Ht,[e[10]||(e[10]=o("div",{class:"label"},"tools",-1)),o("div",Mt,[r(n.VueJsonPretty,{data:n.handleParse(n.agentDetail.toolMap),deep:3,showDoubleQuotes:!0,showIcon:!0,highlightSelectedItem:!1,highlightMouseoverNode:!1},null,8,["data"])])]),o("div",Jt,[e[11]||(e[11]=o("div",{class:"label"},"mcpTools",-1)),o("div",qt,[r(n.VueJsonPretty,{data:n.handleParse(n.agentDetail.mcpToolMap),deep:3,showDoubleQuotes:!0,showIcon:!0,highlightSelectedItem:!1,highlightMouseoverNode:!1},null,8,["data"])])]),r(n.AccessList,{"agent-id":a.agent.id},null,8,["agent-id"]),o("div",Rt,[r(n.SkillList,{"agent-id":a.agent.id},null,8,["agent-id"])])])):ie("",!0)]),_:1},8,["modelValue","title"])}const Qt=W(bt,[["render",Kt],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/AgentDetailDrawer.vue"]]),Wt=R({__name:"Instances",props:{instances:{type:Array,required:!0}},setup(t,{expose:e}){e();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),Gt={class:"instances"};function Yt(t,e,a,n,h,y){return I(),E("div",Gt,[o("pre",null,B(a.instances),1)])}const Zt=W(Wt,[["render",Yt],["__scopeId","data-v-26834fd9"],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/Instances.vue"]]),Xt=R({__name:"InvokeHistoryDialog",props:{modelValue:{type:Boolean,required:!0},invokeHistory:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{expose:e,emit:a}){e();const n=t,h=a,y=ge({get:()=>n.modelValue,set:f=>h("update:modelValue",f)}),_={props:n,emit:h,modelValue:y,handleParse:f=>{try{let g=JSON.parse(f);const b=v=>{if(typeof v=="string")try{const k=JSON.parse(v);return b(k)}catch{return v}else{if(Array.isArray(v))return v.map(k=>b(k));if(typeof v=="object"&&v!==null){const k={};for(const A in v)v.hasOwnProperty(A)&&(k[A]=b(v[A]));return k}}return v};return b(g)}catch(g){return console.error("Failed to parse JSON:",g),null}},formatDate:f=>new Date(f).toLocaleString(),get VueJsonPretty(){return Se}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),$t={key:0},en={class:"invoke-history-item"},tn={class:"invoke-history-item"},nn={key:1};function ln(t,e,a,n,h,y){const c=w("el-dialog");return I(),H(c,{title:"",modelValue:n.modelValue,"onUpdate:modelValue":e[0]||(e[0]=u=>n.modelValue=u),width:"70%",top:"10px","close-on-click-modal":!1,"close-on-press-escape":!1,class:"invoke-history",center:""},{default:d(()=>[Object.keys(a.invokeHistory).length?(I(),E("div",$t,[o("div",en,[e[1]||(e[1]=o("strong",null,"输入:",-1)),r(n.VueJsonPretty,{data:n.handleParse(a.invokeHistory.inputs),deep:3,showDoubleQuotes:!0,showIcon:!0,highlightSelectedItem:!1,highlightMouseoverNode:!1},null,8,["data"])]),o("div",tn,[e[2]||(e[2]=o("strong",null,"输出:",-1)),O(" "+B(a.invokeHistory.outputs),1)])])):(I(),E("div",nn," 暂无调用记录 "))]),_:1},8,["modelValue"])}const an=W(Xt,[["render",ln],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/InvokeHistoryDialog.vue"]]),on=R({__name:"InvokeHistory",props:{modelValue:{type:Boolean,required:!0},agentId:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{expose:e,emit:a}){e();const n=t,h=a,y=ge({get:()=>n.modelValue,set:s=>h("update:modelValue",s)}),c=D({1:"页面",2:"接口",3:"系统内部",4:"其他"}),u=D({1:"agnet"}),_=D([]),f=D(!1),g=D(null);Z(()=>n.modelValue,s=>{s?Ge(Number(n.agentId)).then(i=>{i.data.code===200?_.value=i.data.data||[]:N.error(i.data.message)}):_.value=[]});const A={props:n,emit:h,modelValue:y,invokeWayMap:c,typeMap:u,invokeHistory:_,detailVisible:f,detailInvokeHistory:g,handleParse:s=>{try{let i=JSON.parse(s);const S=F=>{if(typeof F=="string")try{const l=JSON.parse(F);return S(l)}catch{return F}else{if(Array.isArray(F))return F.map(l=>S(l));if(typeof F=="object"&&F!==null){const l={};for(const p in F)F.hasOwnProperty(p)&&(l[p]=S(F[p]));return l}}return F};return S(i)}catch(i){return console.error("Failed to parse JSON:",i),null}},formatDate:s=>new Date(s).toLocaleString(),handleDetail:s=>{g.value=s,f.value=!0},InvokeHistoryDialog:an};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),rn={key:1};function sn(t,e,a,n,h,y){const c=w("el-table-column"),u=w("el-button"),_=w("el-table"),f=w("el-drawer");return I(),E($,null,[r(f,{title:"调用记录",modelValue:n.modelValue,"onUpdate:modelValue":e[0]||(e[0]=g=>n.modelValue=g),size:"60%","close-on-click-modal":!1,"close-on-press-escape":!1,class:"invoke-history",direction:"rtl"},{default:d(()=>[n.invokeHistory.length?(I(),H(_,{key:0,data:n.invokeHistory,style:{width:"100%",height:"100%"}},{default:d(()=>[r(c,{prop:"id",label:"ID",align:"center"}),r(c,{prop:"invokeUserName",label:"调用用户",align:"center"}),r(c,{prop:"invokeTime",label:"调用时间",width:"150",align:"center"},{default:d(g=>[O(B(n.formatDate(g.row.invokeTime)),1)]),_:1}),r(c,{prop:"invokeWay",label:"invokeWay",align:"center"},{default:d(g=>[O(B(n.invokeWayMap[g.row.invokeWay]),1)]),_:1}),r(c,{prop:"type",label:"type",align:"center"},{default:d(g=>[O(B(n.typeMap[g.row.type]),1)]),_:1}),r(c,{label:"操作",align:"center",width:"100"},{default:d(g=>[r(u,{type:"primary",size:"small",text:"",onClick:b=>n.handleDetail(g.row)},{default:d(()=>e[2]||(e[2]=[O("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(I(),E("div",rn," 暂无调用记录 "))]),_:1},8,["modelValue"]),r(n.InvokeHistoryDialog,{modelValue:n.detailVisible,"onUpdate:modelValue":e[1]||(e[1]=g=>n.detailVisible=g),invokeHistory:n.detailInvokeHistory},null,8,["modelValue","invokeHistory"])],64)}const un=W(on,[["render",sn],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/components/InvokeHistory.vue"]]),dn=R({__name:"AgentList",setup(t,{expose:e}){e();const{user:a}=Oe(),n=D([]),h=D(!1),y=D(!1),c=D("create"),u=D({id:0,name:"",description:"",agentUrl:"",isPublic:!1}),_=D(!1),f=D(null),g=xe(),b=D(""),v=D(null),k=D(""),A=D(null),s=D("0"),i=D(!1),S=D(0),{currentTheme:F}=je(),l=async()=>{h.value=!0;try{const V=await Ye(k.value,s.value==="1");V.data.code===200&&(n.value=V.data.data||[])}catch{N.error("获取Agent列表失败")}finally{h.value=!1}},p=V=>{S.value=V.id,i.value=!0},C=()=>{c.value="create",u.value={id:0,name:"",description:"",agentUrl:"",isPublic:!1},b.value="",v.value=null,y.value=!0},P=V=>{c.value="edit",u.value={...V},V.image?b.value=`data:image/jpeg;base64,${V.image}`:b.value="",v.value=null,y.value=!0},x=async V=>{try{await me.confirm("确定要删除这个Agent吗？","提示",{type:"warning"}),(await Ze(V.id)).data.code===200?(N.success("删除成功"),l()):N.error("删除失败")}catch(L){L!=="cancel"&&N.error("删除失败")}},j=async()=>{try{let V=null;v.value&&(V=await new Promise(M=>{const le=new FileReader;le.onload=De=>{var fe;const Ae=(fe=De.target)==null?void 0:fe.result;M(Ae.split(",")[1])},le.readAsDataURL(v.value)}));const L={name:u.value.name,description:u.value.description,agentUrl:u.value.agentUrl,isPublic:u.value.isPublic,image:V};c.value==="create"?(await Xe(L)).data.code===200?(N.success("创建成功"),l()):N.error("创建失败"):(await $e(u.value.id,L)).data.code===200?(N.success("更新成功"),l()):N.error("更新失败"),y.value=!1,l()}catch{N.error(c.value==="create"?"创建失败":"更新失败")}},U=V=>new Date(V).toLocaleString(),G=V=>{f.value=V,_.value=!0},K=V=>{g.push({path:"/tasks",query:{serverAgentId:V.id}})},z=V=>{var L;((L=V.instances)==null?void 0:L.length)>0?window.open(`/agent-manager/chat?serverAgentId=${V.agent.id}&conversationId=${lt()}`,"_blank"):N.warning("Agent未启动")},ee=V=>{const L=["image/jpeg","image/png"].includes(V.type),M=V.size/1024/1024<5;return L?M?(v.value=V,b.value=URL.createObjectURL(V),!1):(N.error("图片大小不能超过 5MB!"),!1):(N.error("图片格式只能是 JPG 或 PNG!"),!1)},J=V=>{},te=V=>{},ne=()=>{A.value&&clearTimeout(A.value),A.value=setTimeout(()=>{l()},300)},X=async(V,L)=>{L.stopPropagation();try{const M={userId:a==null?void 0:a.id,type:1,targetId:V.agent.id};V.isFavorite?(await et(M)).data.code===200&&N.success("取消收藏成功"):(await tt(M)).data.code===200&&N.success("收藏成功"),l()}catch{N.error("操作失败")}};Z(()=>s.value,()=>{l()}),pe(()=>{l()});const Y={user:a,agentList:n,loading:h,dialogVisible:y,dialogType:c,agentForm:u,drawerVisible:_,selectedAgent:f,router:g,imageUrl:b,imageFile:v,searchQuery:k,searchTimeout:A,agentType:s,historyVisible:i,historyAgentId:S,currentTheme:F,fetchAgents:l,handleHistory:p,handleCreate:C,handleEdit:P,handleDelete:x,handleSubmit:j,formatDate:U,handleShowDetail:G,handleTask:K,handleChat:z,beforeImageUpload:ee,handleImageSuccess:J,handleImageError:te,handleSearch:ne,handleFavorite:X,AgentDetailDrawer:Qt,get Plus(){return Ue},get Star(){return Le},get StarFilled(){return Ee},Instances:Zt,InvokeHistory:un};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}}),cn={class:"agent-list-container"},pn={class:"dashboard-header"},mn={class:"search-bar"},gn={class:"table-container"},fn={class:"agent-table"},vn={key:0,class:"loading-container"},hn={key:"empty",class:"empty-state"},yn={class:"empty-content"},_n=["onClick"],bn={class:"agent-info"},kn={class:"agent-avatar"},Fn=["src"],Cn={key:1,class:"agent-logo-placeholder"},wn={class:"agent-details"},Vn=["onClick"],Sn={class:"agent-status"},Dn={class:"visibility"},An={class:"status-tag"},Nn={class:"group"},In={class:"activity"},Pn={class:"control-buttons"},Bn=["onClick"],On=["onClick"],xn=["onClick"],jn=["onClick"],En={class:"favorite-container"},Ln=["src"],Un={class:"dialog-footer"};function Tn(t,e,a,n,h,y){const c=w("el-option"),u=w("el-select"),_=w("el-input"),f=w("InfoFilled"),g=w("el-icon"),b=w("el-tag"),v=w("el-popover"),k=w("el-form-item"),A=w("el-switch"),s=w("el-upload"),i=w("el-form"),S=w("el-button"),F=w("el-dialog");return I(),E($,null,[o("div",cn,[e[23]||(e[23]=o("div",{class:"cyber-grid"},null,-1)),e[24]||(e[24]=o("div",{class:"circuit-point point-1"},null,-1)),e[25]||(e[25]=o("div",{class:"circuit-point point-2"},null,-1)),o("div",pn,[o("div",mn,[r(_,{type:"text",size:"large",modelValue:n.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=l=>n.searchQuery=l),onInput:n.handleSearch,placeholder:"搜索 Agent..."},{append:d(()=>[r(u,{modelValue:n.agentType,"onUpdate:modelValue":e[0]||(e[0]=l=>n.agentType=l),size:"large",class:"type-search"},{default:d(()=>[r(c,{key:"0",label:"全部",value:"0"}),r(c,{key:"1",label:"收藏",value:"1"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),o("button",{class:"create-btn",onClick:n.handleCreate},"+ AGENT")]),e[26]||(e[26]=o("div",{class:"agent-list-type"},null,-1)),o("div",gn,[o("div",fn,[n.loading?(I(),E("div",vn,e[11]||(e[11]=[o("div",{class:"loading-spinner"},null,-1),o("span",null,"加载中...",-1)]))):(I(),H(Te,{key:1,name:"list",tag:"div"},{default:d(()=>[n.agentList.length===0?(I(),E("div",hn,[o("div",yn,[e[12]||(e[12]=o("span",{class:"empty-text"},"暂无Agent数据",-1)),e[13]||(e[13]=o("br",null,null,-1)),n.agentType==="0"?(I(),E("button",{key:0,class:"create-btn",onClick:n.handleCreate},"创建 AGENT")):ie("",!0)])])):ie("",!0),(I(!0),E($,null,ke(n.agentList,l=>{var p;return I(),E("div",{key:l.agent.id,class:"agent-card",onClick:q(C=>n.handleChat(l),["stop"])},[o("div",bn,[o("div",kn,[l.agent.image?(I(),E("img",{key:0,src:`data:image/jpeg;base64,${l.agent.image}`,class:"agent-logo",alt:"agent logo"},null,8,Fn)):(I(),E("div",Cn,B(l.agent.name.charAt(0).toUpperCase()),1))]),o("div",wn,[o("h4",{onClick:q(C=>n.handleShowDetail(l.agent),["stop"])},B(l.agent.name),9,Vn),o("p",null,B(l.agent.description),1)])]),o("div",Sn,[o("div",Dn,[o("span",{class:ze(["badge",{public:l.agent.isPublic}])},B(l.agent.isPublic?"公开":"私有"),3)])]),o("div",{class:"status",onClick:e[2]||(e[2]=q(()=>{},["stop"]))},[((p=l.instances)==null?void 0:p.length)>0?(I(),H(v,{key:0,placement:"right",trigger:"hover",width:"auto"},{reference:d(()=>[r(b,{type:"success"},{default:d(()=>[o("div",An,[e[14]||(e[14]=O("runing ")),r(g,null,{default:d(()=>[r(f)]),_:1})])]),_:1})]),default:d(()=>[r(n.Instances,{instances:l.instances},null,8,["instances"])]),_:2},1024)):(I(),H(b,{key:1,type:"info"},{default:d(()=>[...e[15]||(e[15]=[O("stop")])]),_:1}))]),o("div",Nn,[o("time",null,B(l.agent.group),1),e[16]||(e[16]=o("br",null,null,-1)),o("time",null,B(l.agent.version),1)]),o("div",In,[e[17]||(e[17]=o("span",null,"创建时间：",-1)),o("time",null,B(n.formatDate(l.agent.ctime)),1),e[18]||(e[18]=o("br",null,null,-1)),e[19]||(e[19]=o("span",null,"更新时间：",-1)),o("time",null,B(n.formatDate(l.agent.utime)),1)]),o("div",Pn,[o("button",{size:"small",class:"edit-btn",onClick:q(C=>n.handleEdit(l.agent),["stop"])},"编辑",8,Bn),o("button",{size:"small",class:"delete-btn",onClick:q(C=>n.handleDelete(l.agent),["stop"])},"删除",8,On),o("button",{size:"small",class:"task-btn",onClick:q(C=>n.handleTask(l.agent),["stop"])},"任务",8,xn),o("button",{size:"small",class:"history-btn",onClick:q(C=>n.handleHistory(l.agent),["stop"])},"记录",8,jn)]),o("div",En,[r(g,{size:16,onClick:q(C=>n.handleFavorite(l,C),["stop"])},{default:d(()=>[l.isFavorite?(I(),H(n.StarFilled,{key:1,color:"#00f0ff"})):(I(),H(n.Star,{key:0,color:"#6c6c6c"}))]),_:2},1032,["onClick"])])],8,_n)}),128))]),_:1}))])]),r(F,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[8]||(e[8]=l=>n.dialogVisible=l),title:n.dialogType==="create"?"创建Agent":"编辑Agent",width:"640px"},{footer:d(()=>[o("span",Un,[r(S,{onClick:e[7]||(e[7]=l=>n.dialogVisible=!1)},{default:d(()=>e[21]||(e[21]=[O("取消")])),_:1}),r(S,{type:"primary",onClick:n.handleSubmit},{default:d(()=>e[22]||(e[22]=[O("确定")])),_:1})])]),default:d(()=>[r(i,{model:n.agentForm,"label-width":"80px"},{default:d(()=>[r(k,{label:"名称"},{default:d(()=>[r(_,{modelValue:n.agentForm.name,"onUpdate:modelValue":e[3]||(e[3]=l=>n.agentForm.name=l),placeholder:"请输入Agent名称"},null,8,["modelValue"])]),_:1}),r(k,{label:"描述"},{default:d(()=>[r(_,{modelValue:n.agentForm.description,"onUpdate:modelValue":e[4]||(e[4]=l=>n.agentForm.description=l),type:"textarea",placeholder:"请输入Agent描述信息"},null,8,["modelValue"])]),_:1}),r(k,{label:"Agent URL"},{default:d(()=>[r(_,{modelValue:n.agentForm.agentUrl,"onUpdate:modelValue":e[5]||(e[5]=l=>n.agentForm.agentUrl=l),placeholder:"请输入Agent的URL地址"},null,8,["modelValue"])]),_:1}),r(k,{label:"公开"},{default:d(()=>[r(A,{modelValue:n.agentForm.isPublic,"onUpdate:modelValue":e[6]||(e[6]=l=>n.agentForm.isPublic=l)},null,8,["modelValue"])]),_:1}),r(k,{label:"Logo",class:"avatar-uploader-container"},{default:d(()=>[r(s,{class:"avatar-uploader","show-file-list":!1,"before-upload":n.beforeImageUpload,"on-success":n.handleImageSuccess,"on-error":n.handleImageError,accept:".jpg,.jpeg,.png"},{default:d(()=>[n.imageUrl?(I(),E("img",{key:0,src:n.imageUrl,class:"avatar"},null,8,Ln)):(I(),H(g,{key:1,class:"avatar-uploader-icon"},{default:d(()=>[r(n.Plus)]),_:1}))]),_:1}),e[20]||(e[20]=o("div",{class:"upload-tip"},"支持 jpg、png 格式，大小不超过 5MB",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),r(n.AgentDetailDrawer,{modelValue:n.drawerVisible,"onUpdate:modelValue":e[9]||(e[9]=l=>n.drawerVisible=l),agent:n.selectedAgent},null,8,["modelValue","agent"])]),r(n.InvokeHistory,{modelValue:n.historyVisible,"onUpdate:modelValue":e[10]||(e[10]=l=>n.historyVisible=l),agentId:n.historyAgentId},null,8,["modelValue","agentId"])],64)}const Rn=W(dn,[["render",Tn],["__scopeId","data-v-806bbf63"],["__file","/Users/zhangzhiyong/IdeaProjects/open/mone/jcommon/hive-manager/src/main/resources/static/src/views/AgentList.vue"]]);export{Rn as default};
